(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{1500:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i(5155),s=i(2115),r=i(7472);function a(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)({scale:1,positionX:0,positionY:0}),[u,p]=(0,s.useState)(.5),h=()=>{if(!t.current||!t.current.state)return;let{scale:e,positionX:i,positionY:n}=t.current.state;d({scale:e,positionX:i,positionY:n})};return(0,s.useEffect)(()=>{let e=localStorage.getItem("savedImage");e&&l(e)},[]),(0,s.useEffect)(()=>{var t;return"undefined"!=typeof navigator&&(null==(t=navigator.mediaDevices)?void 0:t.getUserMedia)?((async()=>{try{let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});e.current&&(e.current.srcObject=t,e.current.play())}catch(e){console.error("Camera access error:",e),a("Could not access camera.")}})(),()=>{var t;(null==(t=e.current)?void 0:t.srcObject)&&e.current.srcObject.getTracks().forEach(e=>e.stop())}):void a("Camera not supported.")},[]),(0,n.jsxs)("div",{style:{width:"100%",margin:"0 auto",position:"relative",display:"flex",flexDirection:"column",height:"80vh"},children:[(0,n.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,n.jsx)(r.GT,{ref:t,initialScale:c.scale,initialPositionX:c.positionX,initialPositionY:c.positionY,onPanningStop:h,onPinchingStop:h,minScale:.1,limitToBounds:!1,children:()=>(0,n.jsx)(r.WZ,{wrapperStyle:{width:"100%",height:"100%"},children:o?(0,n.jsx)("img",{src:o,alt:"Saved Crop",style:{maxWidth:"100%",touchAction:"none",opacity:u}}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0"},children:(0,n.jsx)("p",{children:"No image found. Please save an image first."})})})}),i?(0,n.jsx)("p",{style:{color:"red",position:"absolute",top:10,left:10,zIndex:30},children:i}):(0,n.jsx)("video",{ref:e,playsInline:!0,muted:!0,style:{width:"100%",height:"auto",backgroundColor:"#000",zIndex:20,position:"absolute",top:0,pointerEvents:"none"}})]}),(0,n.jsx)("div",{style:{padding:"16px",backgroundColor:"#f5f5f5",borderTop:"1px solid #ddd"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,n.jsx)("span",{children:"Opacity:"}),(0,n.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:u,onChange:e=>p(parseFloat(e.target.value)),style:{flex:1}}),(0,n.jsxs)("span",{style:{width:"40px",textAlign:"right"},children:[Math.round(100*u),"%"]})]})})]})}},4792:(e,t,i)=>{Promise.resolve().then(i.bind(i,1500))}},e=>{var t=t=>e(e.s=t);e.O(0,[91,441,684,358],()=>t(4792)),_N_E=e.O()}]);